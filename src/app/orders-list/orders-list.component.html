<div class="tab-content">
  <mat-card class="orders-card">
    <mat-card-header>
      <div mat-card-avatar>
        <mat-icon>shopping_bag</mat-icon>
      </div>
      <mat-card-title>{{ title || 'Historique des commandes' }}</mat-card-title>
      <mat-card-subtitle>{{ orders.length }} commandes récentes</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="orders-list" *ngIf="orders.length > 0; else noOrders">
        <div class="order-item" *ngFor="let order of orders">
          <div class="order-header">
            <div class="order-id">
              <mat-icon>receipt</mat-icon>
              <span>{{ order.orderNumber }}</span>
            </div>
            <div class="order-date">
              {{ order.createdAt | date:'dd/MM/yyyy' }}
            </div>
          </div>
          
          <div class="order-details">
            <div class="order-info">
              <div class="order-items">
                <mat-icon>inventory</mat-icon>
                <span>{{ order.items.length }} article{{ order.items.length > 1 ? 's' : '' }}</span>
              </div>
              <div class="order-total">
                <span class="total-amount">{{ order.totalAmount | currency:'EUR':'symbol':'1.2-2'}}</span>
              </div>
            </div>
            
            <div class="order-status">
              <mat-chip 
                [color]="getOrderStatusColor(order.status)"
                class="status-chip">
                <mat-icon matChipAvatar>{{ getOrderStatusIcon(order.status) }}</mat-icon>
                {{ getOrderStatusTitle(order.status) | titlecase }}
              </mat-chip>
            </div>
          </div>

          <div class="order-actions">
            <button mat-button (click)="onOrderDetails(order.id!)">
              <mat-icon>visibility</mat-icon>
              Voir détails
            </button>
            <button mat-button *ngIf="order.status === 'DELIVERED' || order.status === 'READY_FOR_PICKUP'" (click)="onReorderItems(order.id!, $event)">
              <mat-icon>refresh</mat-icon>
              Racheter
            </button>
            <button mat-button color="warn" *ngIf="order.status === 'PENDING' || order.status === 'PROCESSING'" (click)="onCancelOrder(order.id!, $event)">
              <mat-icon>cancel</mat-icon>
              Annuler
            </button>
          </div>
        </div>
      </div>

      <ng-template #noOrders>
        <div class="empty-state">
          <mat-icon class="empty-icon">shopping_bag</mat-icon>
          <h3>{{ emptyStateTitle || 'Aucune commande' }}</h3>
          <p>{{ emptyStateMessage || 'Vous n\'avez pas encore passé de commande' }}</p>
          <button mat-raised-button color="primary" routerLink="/catalog" *ngIf="showCatalogButton">
            <mat-icon>shopping_cart</mat-icon>
            {{ catalogButtonText || 'Commencer mes achats' }}
          </button>
        </div>
      </ng-template>
    </mat-card-content>
  </mat-card>
</div>
